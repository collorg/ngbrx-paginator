<div *ngIf="pagination$ | async as pagination">
  <div class="stick-to-the-top">
    <div class="d-flex">
    <div class="col">
      <ngb-pagination
        [collectionSize]="(collection$ | async)?.length || 0"
        [(page)]="page"
        (pageChange)="changePage(page)"
        [pageSize]="pagination.pageSize"
        [boundaryLinks]="true"
      >
        <ng-template ngbPaginationPages let-page let-pages="pages">
          <li class="ngb-custom-pages-item" *ngIf="pages.length > 0">
            <div class="mb-3 d-flex flex-nowrap px-2">
              <label
                id="paginationInputLabel"
                for="paginationInput"
                class="col-form-label me-2 ms-1"
                >Page</label
              >
              <input
                #i
                type="text"
                inputmode="numeric"
                pattern="[0-9]*"
                class="form-control custom-pages-input"
                id="paginationInput"
                [value]="pagination.page"
                (keyup.enter)="setPage(i.value)"
                (blur)="setPage(i.value)"
                (input)="formatInput($any($event).target)"
                aria-labelledby="paginationInputLabel paginationDescription"
                style="width: 5rem"
              />
              <span
                id="paginationDescription"
                class="col-form-label text-nowrap px-2"
              >
                of {{ pagesCount$ | async }}</span
              >
            </div>
          </li>
        </ng-template>
      </ngb-pagination>
    </div>
    <div class="col">
      <button
        class="btn dropdown-toggle"
        id="dropdownMenuButton"
        data-bs-toggle="dropdown"
        aria-expanded="false"
      >
        {{ pagination.pageSize }} lines/page
      </button>
      <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
        <li
          *ngFor="let pageSize of pagination.pageSizeOptions"
          class="dropdown-item"
          value="{{ pageSize }}"
          (click)="setPageSize(pageSize)"
        >
          {{ pageSize }} lines
        </li>
      </ul>
    </div>
    <div
    class="d-inline-block"
      *ngIf="filters$ | async as filters"
    >
      <ngbrx-paginator-search-icon [showFilters]="showFilters$ | async"
        *ngIf="hasFilter"
        (click)="toggleShowFilters()"
      ></ngbrx-paginator-search-icon>
    </div>
  </div>
    <div *ngIf="showFilters$ | async">
      <ngbrx-paginator-filter-selector
        [key]="key"
        [extension]="extension"
      ></ngbrx-paginator-filter-selector>
      <div class="row" *ngIf="filters$ | async as filterKeys">
        <ng-container *ngFor="let filterKey of filterKeys; index as filterIdx">
          <div
            class="col-auto col-md input-group"
            *ngIf="isActivated$(filterIdx) | async"
          >
            <select
              *ngIf="
                getFilterValues$(filterKey) | async as fValues;
                else noValues
              "
              (focus)="setFilterKey(filterIdx)"
              (change)="setSelectedOption($event)"
              class="form-control col-md-auto mb-3"
            >
              <option [selected]="filterQueries[filterIdx] === ''" value="{}">
                {{ filterKey }}
              </option>
              <option
                *ngFor="let entry of getEntries(fValues); index as valueIdx"
                [selected]="filterQueries[filterIdx] === entry.key"
                [value]="stringify(entry)"
              >
                {{ entry.value }}
              </option>
            </select>
            <ng-template #noValues>
              <div class="form-floating mb-3 col-md-auto">
                <input
                  class="form-control"
                  [id]="filterKey"
                  type="search"
                  [value]="getFilterQuery$(filterIdx) | async"
                  (focus)="setFilterKey(filterIdx)"
                  (keyup)="setFilterQuery($event)"
                />
                <label [for]="filterKey">{{ filterKey }}</label>
              </div>
            </ng-template>
          </div>
        </ng-container>
      </div>
    </div>
  </div>
</div>
